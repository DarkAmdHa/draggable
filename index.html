<!DOCTYPE HTML>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
		<title>Draggable and Risizable Dialog Box</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="icon" href="favicon.svg" type="image/svg+xml" />
		<link href="assets/css/video-js.css" rel="stylesheet">
		<link rel="stylesheet" href="assets/css/videojs-playlist-ui.css">	
		<link rel="stylesheet" href="assets/css/draggable-resizable-dialog.css">

	</head>
	<body>
		
		<div class="container">
			<div id="imgDraggable" onclick="showDialog();">
				<img src="assets/images/play.png" class="tutorial-img">
			</div>
		</div>
		

		<div id="dialog" class="dialog" style="min-width:400px; min-height:280px;">
			<div class="titlebar">Click and Drag to move</div>
			<button name="close"><img src="assets/images/close.png" width='25px'><p style="display:none;">-</p></button>
			<div class="content">
				<video-js id='vid1' width='600' height='300' class="vjs-default-skin vjs-fluid data-setup={}" controls preload>
					<source id='popSource'
					src="https://vz-ad28bd3e-54f.b-cdn.net/eabbaafc-d35a-4efc-b36b-4dfbf24e4347/playlist.m3u8"
					type="application/x-mpegURL">
					
				</video-js>
				
				<ol class="vjs-playlist preview-player-dimensions"></ol>
				
			</div>
			<div class="pop">
			<img src="assets/images/popout.png" alt="Pop Out">
		</div>
		</div>

		

		<script src="assets/js/video.js"></script>

		<script src='assets/js/videojs-playlist.js'></script>
		<script src='assets/js/videojs-playlist-ui.js'></script>
		<script type="text/javascript" src="assets/js/draggable-resizable-dialog.js"></script>
		<script>
			var player = videojs("vid1"); //Video Player Object
			
			player.playlistUi();
			
			player.playlist([{
				name: 'Disney\'s Oceans 1',
      description: 'Explore the depths of our planet\'s oceans. ' +
        'Experience the stories that connect their world to ours. ' +
        'Lorem ipsum dolor sit amet, consectetur adipiscing elit, ' +
        'sed do eiusmod tempor incididunt ut labore et dolore magna ' +
        'aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco ' +
        'laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure ' +
        'dolor in reprehenderit in voluptate velit esse cillum dolore eu ' +
        'fugiat nulla pariatur. Excepteur sint occaecat cupidatat non ' +
        'proident, sunt in culpa qui officia deserunt mollit anim id est ' +
        'laborum.',
      duration: 45,
		sources: [{
			src: 'https://vz-ad28bd3e-54f.b-cdn.net/eabbaafc-d35a-4efc-b36b-4dfbf24e4347/playlist.m3u8',
			type: 'application/x-mpegURL'
		}],
		thumbnail: [
        {
          srcset: 'https://themomentum.co/wp-content/uploads/2020/04/Thumbnail-Roche-test-kit.png',
          type: 'image/jpeg',
          media: '(min-width: 400px;)'
        },
        {
          src: 'https://themomentum.co/wp-content/uploads/2020/04/Thumbnail-Roche-test-kit.png'
        }
      ],
		poster: 'https://themomentum.co/wp-content/uploads/2020/04/Thumbnail-Roche-test-kit.png'
		}, {
		sources: [{
			src: 'https://vz-ad28bd3e-54f.b-cdn.net/6e1cffce-7df5-4d22-97d4-b47f79a720e0/playlist.m3u8',
			type: 'application/x-mpegURL'
		}],
		poster: 'http://media.w3.org/2010/05/bunny/poster.png'
		}]);
		player.playlist.autoadvance(0);
		
		document.querySelector('.pop').addEventListener('click', function() {   
						player.pause();
						var time = player.currentTime(); 
						console.log(time);
						setTimeout(() => {
						document.getElementById('dialog').style.transform = "scale(0)";
						}, 1);
						setTimeout(() => {
						document.getElementById('dialog').style.display = "none";
						}, 400);
						let playlistItems = document.querySelectorAll('.vjs-playlist-item');
						let currentPlayingIndex = 0;
						playlistItems.forEach((item,index)=>{
							if(item.classList.contains('vjs-selected')){
								currentPlayingIndex = index;
							}
						});
						console.log(player.playlist()[currentPlayingIndex].sources[0].src);


						window.open(`https://upbeat-shirley-2e1ceb.netlify.app/?t=${time}&link=${player.playlist()[currentPlayingIndex].sources[0].src}`,'Video', "width=480,height=500,resizable=no,left=200,top=100" );
						return true;
					});
		</script>
	</body>
</html>
