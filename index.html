<!DOCTYPE HTML>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
		<title>Draggable and Risizable Dialog Box</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="icon" href="favicon.svg" type="image/svg+xml" />
		<link href="https://unpkg.com/video.js@6.7.1/dist/video-js.css" rel="stylesheet">
		<link rel="stylesheet" href="draggable-resizable-dialog.css">

	</head>
	<body>
		
		<div class="container">
			<div id="imgDraggable" onclick="showDialog();">
				<img src="play.png" class="tutorial-img">
			</div>
		</div>

		<div id="dialog" class="dialog" style="min-width:400px; min-height:280px;">
			<div class="titlebar">Click and Drag to move</div>
			<button name="close"><img src="close.png" width='25px'><p style="display:none;">-</p></button>
			<div class="content">
				<video-js id='vid1' width='600' height='300' class="vjs-default-skin" controls preload>
					<source id='popSource'
					src="https://vz-ad28bd3e-54f.b-cdn.net/eabbaafc-d35a-4efc-b36b-4dfbf24e4347/playlist.m3u8"
					type="application/x-mpegURL">
				</video-js>
			</div>
			<div class="pop">
			<img src="popout.png" alt="Pop Out">
		</div>
		</div>

		<script>

			document.querySelector('.pop').addEventListener('click', function() {   
						player.pause();
						var time = player.currentTime(); 
						console.log(time);
						setTimeout(() => {
						document.getElementById('dialog').style.transform = "scale(0)";
						}, 1);
						setTimeout(() => {
						document.getElementById('dialog').style.display = "none";
						}, 400);
						
						window.open(`https://upbeat-shirley-2e1ceb.netlify.app/?t=${time}&link=${document.getElementById('popSource').src}`,'Video', "width=480,height=500,resizable=no,left=200,top=100" );
						return true;
					});
		</script>

		<script src="https://unpkg.com/video.js@6.7.1/dist/video.js"></script>
		<script src="https://unpkg.com/@videojs/http-streaming@0.9.0/dist/videojs-http-streaming.js"></script>
		<script type="text/javascript" src="draggable-resizable-dialog.js"></script>
	</body>
</html>
